name: Release
on:
  push:
    #tags:
    #  - '*.*.*'

x-defaults: &defaults
  runs-on: ubuntu-latest

jobs:
  build:
    <<: *defaults
    container: python:3.13-alpine
    steps:
      - run: pip install build
      - run: python -m build
      - uses: actions/upload-artifact@v6
        with:
          path: dist

  release:
    <<: *defaults
    needs: [build]
    steps:
      - uses: actions/checkout@v6
      - container: githubchangeloggenerator/github-changelog-generator
        run: github_changelog_generator --help
      - uses: actions/download-artifact@v7
#      - uses: softprops/action-gh-release@v2.5.0
